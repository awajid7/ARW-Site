<section class="contact-section two pb-120">
    <div class="container">
        <!-- Decorative Elements -->
        <div class="contact-element-one"><img src="assets/images/element/element-6.png" alt="element"></div>
        <div class="contact-element-two"><img src="assets/images/element/element-39.png" alt="element"></div>
        <div class="contact-element-three"><img src="assets/images/element/element-26.png" alt="element"></div>
        <div class="contact-element-four"><img src="assets/images/element/element-7.png" alt="element"></div>

        <div class="contact-area">
            <div class="contact-element-five"><img src="assets/images/element/element-60.png" alt="element"></div>
            <div class="contact-element-six"><img src="assets/images/element/element-60.png" alt="element"></div>

            <div class="row mb-30-none">
                <!-- Image / Thumb -->
                <div class="col-xl-5 col-lg-5 mb-30">
                    <div class="contact-thumb">
                        <img src="assets/images/contact.png" alt="contact">
                    </div>
                </div>

                <!-- Form -->
                <div class="col-xl-7 col-lg-7 mb-30">
                    <div class="contact-form-area">
                        <div class="contact-form-header">
                            <div class="left">
                                <h2 class="title">ðŸš€ Ready to Start?</h2>
                                <p>Have an idea or challenge? We're here to turn it into a streamlined, scalable solution. Let's talk.</p>
                            </div>
                            <div class="right">
                                <div class="circle">
                                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300">
                                        <defs>
                                            <path id="circlePathtwo" d=" M 150, 150 m -60, 0 a 60,60 0 0,1 120,0 a 60,60 0 0,1 -120,0 "/>
                                        </defs>
                                        <circle cx="150" cy="100" r="75" fill="none"/>
                                        <g>
                                            <use xlink:href="#circlePathtwo" fill="none"/>
                                            <text fill="#3249b3">
                                                <textPath xlink:href="#circlePathtwo">- Arrow Consolidated â€” Process is Key â€” Remote Teams â€” Real Results - </textPath>
                                            </text>
                                        </g>
                                    </svg>
                                </div>
                                <div class="contact-logo">
                                    <img src="assets/images/fav.png" alt="favicon">
                                </div>
                            </div>
                        </div>

                        <!-- Success & Error Messages -->
                        <div class="success-message" id="successMessage" style="display:none;padding:15px;margin:15px 0;background:#d4edda;color:#155724;border:2px solid #c3e6cb;border-radius:8px;text-align:center;font-weight:500;">
                            Thank you! Your message has been sent successfully. We'll get back to you soon.
                        </div>
                        <div class="error-alert" id="errorMessage" style="display:none;padding:15px;margin:15px 0;background:#f8d7da;color:#721c24;border:2px solid #f5c6cb;border-radius:8px;text-align:center;font-weight:500;">
                            Sorry, there was an error sending your message. Please try again.
                        </div>

                        <!-- Form -->
                        <form class="contact-form" id="contactForm">
                            <div class="row justify-content-center mb-30-none">
                                <!-- Name -->
                                <div class="col-xl-6 col-lg-6 form-group">
                                    <input type="text" class="form--control" placeholder="Your Full Name" id="fullName" name="fullName" required>
                                    <div class="error-message" id="fullNameError"></div>
                                </div>

                                <!-- Email -->
                                <div class="col-xl-6 col-lg-6 form-group">
                                    <input type="email" class="form--control" placeholder="Your Email" id="email" name="email" required>
                                    <div class="error-message" id="emailError"></div>
                                </div>

                                <!-- Company -->
                                <div class="col-xl-6 col-lg-6 form-group">
                                    <input type="text" class="form--control" placeholder="Company Name" id="company" name="company" required>
                                    <div class="error-message" id="companyError"></div>
                                </div>

                                <!-- Phone + Country -->
                                <div class="col-xl-6 col-lg-6 form-group">
                                    <div style="display:flex;gap:10px;">
                                        <div style="position:relative; min-width:120px;">
                                            <div class="form--control country-select" id="countrySelect" style="cursor:pointer;display:flex;align-items:center;gap:8px;">
                                                <span class="country-flag">ðŸ‡ºðŸ‡¸</span>
                                                <span class="country-code">+1</span>
                                            </div>
                                            <div class="country-dropdown-content" id="countryDropdown" style="position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 8px 25px rgba(0,0,0,0.15);z-index:1000;max-height:200px;overflow-y:auto;display:none;">
                                                <input type="text" class="country-search" id="countrySearch" placeholder="Search..." style="width:100%;padding:8px;border:none;border-bottom:1px solid #eee;">
                                                <div class="countries-list" id="countriesList"></div>
                                            </div>
                                        </div>
                                        <input type="tel" class="form--control phone-input" placeholder="Phone Number" name="phone" id="phone" required style="flex:1;" oninput="this.value=this.value.replace(/[^0-9]/g,'');">
                                    </div>
                                    <div class="error-message" id="phoneError"></div>
                                </div>

                                <!-- Service Category -->
                                <div class="col-xl-6 col-lg-6 form-group">
                                    <div class="contact-select">
                                        <select class="form--control" id="serviceCategory" name="serviceCategory" required>
                                            <option value="">-- Select Service Category --</option>
                                            <option value="Operations & Virtual Support">Operations & Virtual Support</option>
                                            <option value="Strategy and Business Planning">Strategy and Business Planning</option>
                                            <option value="Growth Insights and Technology">Growth Insights and Technology</option>
                                        </select>
                                    </div>
                                    <div class="error-message" id="serviceCategoryError"></div>
                                </div>

                                <!-- Sub-Service -->
                                <div class="col-xl-6 col-lg-6 form-group">
                                    <div class="contact-select">
                                        <select class="form--control" id="subService" name="subService" required disabled>
                                            <option value="">-- Select a Sub-Service --</option>
                                        </select>
                                    </div>
                                    <div class="error-message" id="subServiceError"></div>
                                </div>

                                <!-- Message -->
                                <div class="col-xl-12 form-group">
                                    <textarea class="form--control" placeholder="Tell us about your project or how we can help you..." name="message" id="message" required></textarea>
                                    <div class="error-message" id="messageError"></div>
                                </div>

                                <!-- Disclaimer + Submit -->
                                <div class="col-xl-12 form-group custom-form-group mt-20">
                                    <div class="form-group custom-check-group" style="margin-bottom:15px;">
                                        <input type="checkbox" id="disclaimer" name="disclaimer" required>
                                        <label for="disclaimer" style="margin-left:8px;font-size:0.9rem;line-height:1.4;">
                                            I agree to the 
                                            <a href="/terms-and-conditions" target="_blank" style="color:#3249b3;text-decoration:none;font-weight:500;">Terms and Conditions</a> 
                                            and 
                                            <a href="/privacy-policy" target="_blank" style="color:#3249b3;text-decoration:none;font-weight:500;">Privacy Policy</a>
                                        </label>
                                        <div class="error-message" id="disclaimerError"></div>
                                    </div>
                                    <button type="submit" class="btn--base" id="submitBtn">Send Message</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Styles & Scripts -->
<style>
/* Form Styles */
.form--control { width:100%; padding:12px 15px; border:1px solid #ddd; border-radius:5px; font-size:14px; transition:border-color 0.3s; }
.form--control:focus { outline:none; border-color:#3249b3; }
.form--control:disabled { background:#f8f9fa; cursor:not-allowed; opacity:0.6; }
.btn--base { background:#3249b3; color:#fff; border:none; padding:12px 30px; border-radius:5px; cursor:pointer; font-size:16px; transition:0.3s; }
.btn--base:hover { background:#2a3f9f; }
.btn--base:disabled { background:#ccc; cursor:not-allowed; }
.country-option { padding:10px 12px; cursor:pointer; display:flex; align-items:center; gap:8px; font-size:14px; transition:0.2s; }
.country-option:hover { background:#f8f9fa; }
.country-flag { font-size:16px; min-width:20px; }
.country-select:hover { background:#f8f9fa; }
@media(max-width:768px){ .col-xl-6.col-lg-6.form-group div[style*="display:flex"]{ flex-direction:column; gap:15px; } .country-select{ min-width:unset; } }
</style>

<script>
// Countries + Sub-services
const countries = [
    { name:"United States", code:"+1", flag:"ðŸ‡ºðŸ‡¸" },
    { name:"Pakistan", code:"+92", flag:"ðŸ‡µðŸ‡°" },
    { name:"India", code:"+91", flag:"ðŸ‡®ðŸ‡³" },
    { name:"UK", code:"+44", flag:"ðŸ‡¬ðŸ‡§" }
];
const subServices = {
    "Operations & Virtual Support":["Virtual Assistance","Workflow Automation","Tech-Enabled Back Office","Client Onboarding & Design"],
    "Strategy and Business Planning":["Consulting","Strategic Business Planning","Opportunity Gap Analysis","Business Process Audit & Optimization"],
    "Growth Insights and Technology":["Research & Intel","Market & Growth Enablement","Data Security","Tech Stack Optimization"]
};
let selectedCountry=countries[0];

// Init Country Dropdown
function initCountryDropdown(){
    const list=document.getElementById('countriesList');
    countries.forEach(c=>{
        const option=document.createElement('div');
        option.className='country-option';
        option.innerHTML=`<span class="country-flag">${c.flag}</span><span>${c.name} (${c.code})</span>`;
        option.addEventListener('click',()=>selectCountry(c));
        list.appendChild(option);
    });
}
function selectCountry(c){
    selectedCountry=c;
    document.getElementById('countrySelect').innerHTML=`<span class="country-flag">${c.flag}</span><span class="country-code">${c.code}</span>`;
    document.getElementById('countryDropdown').style.display='none';
}
document.getElementById('countrySelect').addEventListener('click',()=>{ const dropdown=document.getElementById('countryDropdown'); dropdown.style.display=dropdown.style.display==='none'?'block':'none'; });
document.getElementById('countrySearch').addEventListener('input',function(){
    const term=this.value.toLowerCase();
    document.querySelectorAll('.country-option').forEach(opt=>opt.style.display=opt.textContent.toLowerCase().includes(term)?'flex':'none');
});
document.addEventListener('click',function(e){
    const dropdown=document.getElementById('countryDropdown'), select=document.getElementById('countrySelect');
    if(!select.contains(e.target)&&!dropdown.contains(e.target)) dropdown.style.display='none';
});

// Validators
const validators={
    fullName:v=>v.length>=2, email:v=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v), company:v=>v.length>=1,
    phone:v=>/^\d{6,15}$/.test(v.replace(/\s+/g,'')), serviceCategory:v=>v!=='', subService:v=>v!=='',
    message:v=>v.length>=1, disclaimer:v=>v===true
};
const errorMessages={
    fullName:'Full name must be at least 2 characters', email:'Enter a valid email', company:'Company required',
    phone:'Enter valid phone number', serviceCategory:'Select a category', subService:'Select a sub-service',
    message:'Message is required', disclaimer:'You must agree to Terms & Privacy'
};
function validateField(id,validator,msg){const f=document.getElementById(id);let val=id==='disclaimer'?f.checked:f.value.trim();if(!validator(val)){showError(id,msg);return false;}hideError(id);return true;}
function showError(id,msg){const e=document.getElementById(id+'Error');if(e){e.textContent=msg;e.style.display='block';}}
function hideError(id){const e=document.getElementById(id+'Error');if(e)e.style.display='none';}
Object.keys(validators).forEach(fid=>{const f=document.getElementById(fid);if(f){if(fid==='disclaimer'){f.addEventListener('change',()=>validateField(fid,validators[fid],errorMessages[fid]));}else{f.addEventListener('blur',()=>{if(f.value.trim()||document.getElementById(fid+'Error').style.display==='block') validateField(fid,validators[fid],errorMessages[fid]);});f.addEventListener('input',()=>{if(document.getElementById(fid+'Error').style.display==='block') validateField(fid,validators[fid],errorMessages[fid]);});}}});

// Service Category â†’ Sub-service
document.getElementById('serviceCategory').addEventListener('change',function(){
    const sel=this.value, sub=document.getElementById('subService');
    sub.innerHTML='<option value="">-- Select a Sub-Service --</option>'; sub.value=''; 
    if(sel&&subServices[sel]){sub.disabled=false;subServices[sel].forEach(s=>{const o=document.createElement('option');o.value=s;o.textContent=s;sub.appendChild(o);});}else{sub.disabled=true;} hideError('subService');
});

// Form submission
document.getElementById('contactForm').addEventListener('submit',async function(e){
    e.preventDefault();
    document.getElementById('successMessage').style.display='none';
    document.getElementById('errorMessage').style.display='none';
    let valid=true; Object.keys(validators).forEach(fid=>{if(!validateField(fid,validators[fid],errorMessages[fid])) valid=false;});
    if(!valid) return;

    const formData=new FormData();
    ['fullName','email','company','phone','serviceCategory','subService','message'].forEach(f=>formData.append(f,document.getElementById(f).value.trim()));
    formData.append('disclaimer',document.getElementById('disclaimer').checked?'Yes':'No');
    formData.append('countryCode',selectedCountry.code);
    formData.append('country',selectedCountry.name);

    const btn=document.getElementById('submitBtn'); const orig=btn.textContent;
    try{
        btn.disabled=true; btn.textContent='Sending...';
        const response=await fetch('https://script.google.com/macros/s/AKfycbz-vl00pvaSoh4RFk0O-CDSms_Y0Ag9BaM3meWQOdFKBuZXC0DHT469YJwxpWR-JCst/exec',{method:'POST',body:formData});
        if(response.ok){document.getElementById('successMessage').style.display='block'; this.reset(); document.getElementById('subService').disabled=true; selectCountry(countries[0]); document.getElementById('successMessage').scrollIntoView({behavior:'smooth'});}else{throw new Error('Network not ok');}
    }catch(err){console.error(err); document.getElementById('errorMessage').style.display='block';}finally{btn.disabled=false;btn.textContent=orig;}
});

// Initialize
document.addEventListener('DOMContentLoaded',function(){initCountryDropdown(); console.log('Form ready');});
